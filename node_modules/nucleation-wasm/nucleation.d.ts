/* tslint:disable */
/* eslint-disable */

export enum AlertLevel {
  Green = 0,
  Yellow = 1,
  Orange = 2,
  Red = 3,
}

export class CompressionModel {
  free(): void;
  [Symbol.dispose](): void;
  /**
   * Update an actor's scheme with a new observation.
   */
  updateActor(actor_id: string, observation: Float64Array, timestamp: number): boolean;
  /**
   * Get an actor's current entropy.
   */
  actorEntropy(actor_id: string): number | undefined;
  /**
   * Register a new actor with optional initial distribution.
   */
  registerActor(actor_id: string, distribution?: Float64Array | null): void;
  /**
   * Set the learning rate for scheme updates.
   */
  setLearningRate(rate: number): void;
  /**
   * Compute conflict potential between two actors.
   */
  conflictPotential(actor_a: string, actor_b: string): number | undefined;
  /**
   * Get full conflict potential details as JSON.
   */
  conflictPotentialDetails(actor_a: string, actor_b: string): any;
  /**
   * Create a new model with the specified number of categories.
   */
  constructor(n_categories: number);
  /**
   * Get list of registered actors.
   */
  actors(): Array<any>;
}

export class DetectorConfig {
  free(): void;
  [Symbol.dispose](): void;
  /**
   * Create a conservative configuration.
   */
  static conservative(): DetectorConfig;
  constructor();
  /**
   * Create a sensitive configuration.
   */
  static sensitive(): DetectorConfig;
  kernel: string;
  window_size: number;
  threshold: number;
  smoothing_window: number;
  min_peak_distance: number;
}

export class NucleationDetector {
  free(): void;
  [Symbol.dispose](): void;
  /**
   * Get confidence in the current assessment (0-1).
   */
  confidence(): number;
  /**
   * Deserialize state from JSON string.
   */
  static deserialize(json: string): NucleationDetector;
  /**
   * Process multiple observations.
   */
  update_batch(values: Float64Array): Phase;
  /**
   * Get the current phase.
   */
  currentPhase(): Phase;
  /**
   * Create a detector with default configuration.
   */
  static with_defaults(): NucleationDetector;
  /**
   * Get the current rolling variance.
   */
  currentVariance(): number;
  /**
   * Get the current inflection magnitude (z-score).
   */
  inflectionMagnitude(): number;
  /**
   * Create a new detector with the given configuration.
   */
  constructor(config: DetectorConfig);
  /**
   * Get the total number of observations processed.
   */
  count(): number;
  /**
   * Reset the detector state.
   */
  reset(): void;
  /**
   * Process a single observation.
   */
  update(value: number): Phase;
  /**
   * Serialize state to JSON string.
   */
  serialize(): string;
}

export enum Phase {
  Stable = 0,
  Approaching = 1,
  Critical = 2,
  Transitioning = 3,
}

export class Shepherd {
  free(): void;
  [Symbol.dispose](): void;
  /**
   * Check a specific dyad for nucleation.
   */
  checkDyad(actor_a: string, actor_b: string, timestamp: number): any;
  /**
   * Get phi history for a dyad as Float64Array pairs [timestamp, phi, ...].
   */
  phiHistory(actor_a: string, actor_b: string): Float64Array;
  /**
   * Update an actor and check for nucleation alerts.
   * Returns array of alert objects.
   */
  updateActor(actor_id: string, observation: Float64Array, timestamp: number): Array<any>;
  /**
   * Register a new actor.
   */
  registerActor(actor_id: string, distribution?: Float64Array | null): void;
  /**
   * Check all dyads for nucleation.
   */
  checkAllDyads(timestamp: number): Array<any>;
  /**
   * Get conflict potential between two actors.
   */
  conflictPotential(actor_a: string, actor_b: string): number | undefined;
  /**
   * Create a new Shepherd system.
   */
  constructor(n_categories: number);
  /**
   * Get list of registered actors.
   */
  actors(): Array<any>;
}

/**
 * Compute Hellinger distance between two distributions.
 */
export function hellingerDistance(p: Float64Array, q: Float64Array): number;

/**
 * Compute Jensen-Shannon divergence between two distributions.
 */
export function jensenShannonDivergence(p: Float64Array, q: Float64Array): number;

/**
 * Compute KL divergence between two distributions.
 */
export function klDivergence(p: Float64Array, q: Float64Array): number;

/**
 * Compute Shannon entropy of a distribution.
 */
export function shannonEntropy(counts: Uint32Array): number;

/**
 * Get the library version.
 */
export function version(): string;

export type InitInput = RequestInfo | URL | Response | BufferSource | WebAssembly.Module;

export interface InitOutput {
  readonly memory: WebAssembly.Memory;
  readonly __wbg_compressionmodel_free: (a: number, b: number) => void;
  readonly __wbg_detectorconfig_free: (a: number, b: number) => void;
  readonly __wbg_nucleationdetector_free: (a: number, b: number) => void;
  readonly __wbg_shepherd_free: (a: number, b: number) => void;
  readonly compressionmodel_actorEntropy: (a: number, b: number, c: number) => [number, number];
  readonly compressionmodel_actors: (a: number) => any;
  readonly compressionmodel_conflictPotential: (a: number, b: number, c: number, d: number, e: number) => [number, number];
  readonly compressionmodel_conflictPotentialDetails: (a: number, b: number, c: number, d: number, e: number) => any;
  readonly compressionmodel_new: (a: number) => number;
  readonly compressionmodel_registerActor: (a: number, b: number, c: number, d: number, e: number) => void;
  readonly compressionmodel_setLearningRate: (a: number, b: number) => void;
  readonly compressionmodel_updateActor: (a: number, b: number, c: number, d: number, e: number, f: number) => number;
  readonly detectorconfig_conservative: () => number;
  readonly detectorconfig_kernel: (a: number) => [number, number];
  readonly detectorconfig_min_peak_distance: (a: number) => number;
  readonly detectorconfig_new: () => number;
  readonly detectorconfig_sensitive: () => number;
  readonly detectorconfig_set_kernel: (a: number, b: number, c: number) => void;
  readonly detectorconfig_set_min_peak_distance: (a: number, b: number) => void;
  readonly detectorconfig_set_smoothing_window: (a: number, b: number) => void;
  readonly detectorconfig_set_threshold: (a: number, b: number) => void;
  readonly detectorconfig_set_window_size: (a: number, b: number) => void;
  readonly detectorconfig_smoothing_window: (a: number) => number;
  readonly detectorconfig_threshold: (a: number) => number;
  readonly detectorconfig_window_size: (a: number) => number;
  readonly hellingerDistance: (a: number, b: number, c: number, d: number) => number;
  readonly jensenShannonDivergence: (a: number, b: number, c: number, d: number) => number;
  readonly klDivergence: (a: number, b: number, c: number, d: number) => number;
  readonly nucleationdetector_confidence: (a: number) => number;
  readonly nucleationdetector_count: (a: number) => number;
  readonly nucleationdetector_currentPhase: (a: number) => number;
  readonly nucleationdetector_currentVariance: (a: number) => number;
  readonly nucleationdetector_deserialize: (a: number, b: number) => [number, number, number];
  readonly nucleationdetector_inflectionMagnitude: (a: number) => number;
  readonly nucleationdetector_new: (a: number) => number;
  readonly nucleationdetector_reset: (a: number) => void;
  readonly nucleationdetector_serialize: (a: number) => [number, number, number, number];
  readonly nucleationdetector_update: (a: number, b: number) => number;
  readonly nucleationdetector_update_batch: (a: number, b: number, c: number) => number;
  readonly nucleationdetector_with_defaults: () => number;
  readonly shannonEntropy: (a: number, b: number) => number;
  readonly shepherd_actors: (a: number) => any;
  readonly shepherd_checkAllDyads: (a: number, b: number) => any;
  readonly shepherd_checkDyad: (a: number, b: number, c: number, d: number, e: number, f: number) => any;
  readonly shepherd_conflictPotential: (a: number, b: number, c: number, d: number, e: number) => [number, number];
  readonly shepherd_new: (a: number) => number;
  readonly shepherd_phiHistory: (a: number, b: number, c: number, d: number, e: number) => any;
  readonly shepherd_registerActor: (a: number, b: number, c: number, d: number, e: number) => void;
  readonly shepherd_updateActor: (a: number, b: number, c: number, d: number, e: number, f: number) => any;
  readonly version: () => [number, number];
  readonly __wbindgen_exn_store: (a: number) => void;
  readonly __externref_table_alloc: () => number;
  readonly __wbindgen_externrefs: WebAssembly.Table;
  readonly __wbindgen_malloc: (a: number, b: number) => number;
  readonly __wbindgen_realloc: (a: number, b: number, c: number, d: number) => number;
  readonly __wbindgen_free: (a: number, b: number, c: number) => void;
  readonly __externref_table_dealloc: (a: number) => void;
  readonly __wbindgen_start: () => void;
}

export type SyncInitInput = BufferSource | WebAssembly.Module;

/**
* Instantiates the given `module`, which can either be bytes or
* a precompiled `WebAssembly.Module`.
*
* @param {{ module: SyncInitInput }} module - Passing `SyncInitInput` directly is deprecated.
*
* @returns {InitOutput}
*/
export function initSync(module: { module: SyncInitInput } | SyncInitInput): InitOutput;

/**
* If `module_or_path` is {RequestInfo} or {URL}, makes a request and
* for everything else, calls `WebAssembly.instantiate` directly.
*
* @param {{ module_or_path: InitInput | Promise<InitInput> }} module_or_path - Passing `InitInput` directly is deprecated.
*
* @returns {Promise<InitOutput>}
*/
export default function __wbg_init (module_or_path?: { module_or_path: InitInput | Promise<InitInput> } | InitInput | Promise<InitInput>): Promise<InitOutput>;
