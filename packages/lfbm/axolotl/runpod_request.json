{
  "input": {
    "user_id": "latticeforge",
    "model_id": "latticeforge-briefing-7b",
    "run_id": "briefing-v2-h200",
    "credentials": {
      "wandb_api_key": "",
      "hf_token": "${HF_TOKEN}"
    },
    "args": {
      "base_model": "Qwen/Qwen2.5-7B-Instruct",
      "model_type": "AutoModelForCausalLM",
      "tokenizer_type": "AutoTokenizer",
      "load_in_8bit": false,
      "load_in_4bit": false,
      "strict": false,
      "trust_remote_code": true,

      "datasets": [
        {
          "path": "${HF_DATASET_REPO}",
          "type": "sharegpt",
          "conversation": "chatml"
        }
      ],

      "dataset_prepared_path": "last_run_prepared",
      "val_set_size": 0.05,
      "output_dir": "./outputs/latticeforge-briefing-7b",

      "sequence_len": 2048,
      "sample_packing": true,
      "eval_sample_packing": false,
      "pad_to_sequence_len": true,

      "gradient_accumulation_steps": 2,
      "micro_batch_size": 8,
      "num_epochs": 5,
      "optimizer": "adamw_torch",
      "lr_scheduler": "cosine",
      "learning_rate": 0.00001,
      "warmup_ratio": 0.1,
      "weight_decay": 0.01,
      "max_grad_norm": 1.0,

      "train_on_inputs": false,
      "group_by_length": false,
      "bf16": true,
      "tf32": true,
      "gradient_checkpointing": true,
      "flash_attention": true,

      "logging_steps": 10,
      "evals_per_epoch": 4,
      "saves_per_epoch": 1,

      "hub_model_id": "${HF_MODEL_REPO}",
      "push_to_hub": true,
      "special_tokens": {
        "pad_token": "<|endoftext|>"
      }
    }
  }
}
